# ============================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================
# This file is for DOCKER/PRODUCTION deployment
# Uses Docker MongoDB with authentication
#
# Setup:
#   1. Copy this file: cp .env.production.example .env.production
#   2. Update MONGO_PASSWORD (change from default)
#   3. Generate JWT secrets: make env-secrets
#   4. Update JWT_SECRET and JWT_REFRESH_SECRET
#   5. Update MONGODB_URI with your MONGO_PASSWORD
#   6. Start production: make up
# ============================================

# ============================================
# PROJECT INFORMATION
# ============================================
PROJECT_NAME=express-mongodb-typescript-api
PROJECT_VERSION=1.0.0

# ============================================
# SERVER CONFIGURATION
# ============================================
PORT=5000
NODE_ENV=production

# ============================================
# DOCKER CONFIGURATION
# ============================================
APP_CONTAINER_NAME=express-api
MONGO_CONTAINER_NAME=mongodb
# MongoDB external port (accessible from host)
MONGO_PORT=27018

# ============================================
# MONGODB CONFIGURATION (Docker - With Auth)
# ============================================
MONGO_USERNAME=admin
# ⚠️ CHANGE THIS PASSWORD!
MONGO_PASSWORD=ChangeThisPassword123
MONGO_DATABASE=myapp

# MongoDB Connection URI (Internal - used by app container)
# ⚠️ UPDATE with your MONGO_PASSWORD!
MONGODB_URI=mongodb://admin:ChangeThisPassword123@mongodb:27017/myapp?authSource=admin

# ============================================
# JWT CONFIGURATION (Production)
# ============================================
# ⚠️ CRITICAL: Generate strong secrets for production!
# Generate with: make env-secrets
# Or: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# NEVER use these default values in production!
JWT_SECRET=CHANGE-THIS-TO-A-STRONG-SECRET-MINIMUM-32-CHARACTERS-LONG
JWT_EXPIRE=7d

#JWT_REFRESH_SECRET=CHANGE-THIS-TO-A-DIFFERENT-STRONG-SECRET-32-CHARS
#JWT_REFRESH_EXPIRE=30d

# ============================================
# RATE LIMITING (Strict for Production)
# ============================================
# Window: 15 minutes (in milliseconds)
RATE_LIMIT_WINDOW_MS=900000
# Max requests per window per IP
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# CORS CONFIGURATION
# ============================================
# Production - Single origin:
CORS_ORIGIN=http://localhost:3000

# Production - Multiple origins (comma-separated):
# CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com,https://app.yourdomain.com

# ⚠️ NEVER use this in production:
# CORS_ORIGIN=*

# ============================================
# LOGGING (Minimal for Production)
# ============================================
# Levels: error, warn, info, debug
# Use 'error' or 'warn' in production
LOG_LEVEL=error

# ============================================
# PRODUCTION CHECKLIST
# ============================================
# Before deploying to production:
# ✅ Changed MONGO_PASSWORD from default
# ✅ Generated and set JWT_SECRET (32+ characters)
# ✅ Generated and set JWT_REFRESH_SECRET (32+ characters)
# ✅ Updated MONGODB_URI with your MONGO_PASSWORD
# ✅ Set appropriate CORS_ORIGIN (your domain)
# ✅ Set LOG_LEVEL to 'error' or 'warn'
# ✅ Never commit .env.production to git
#
# MongoDB Compass Connection (from host):
#   mongodb://admin:YOUR_PASSWORD@localhost:27018/myapp?authSource=admin
#
# Start Production:
#   make up
#
# Generate Secrets:
#   make env-secrets
# ============================================

# ============================================
# DEPLOYMENT OPTIONS
# ============================================
# You can use different MongoDB URIs based on your setup:

# Option 1: Docker MongoDB (current setup)
# MONGODB_URI=mongodb://admin:YOUR_PASSWORD@mongodb:27017/myapp?authSource=admin

# Option 2: MongoDB Atlas (Cloud)
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/myapp?retryWrites=true&w=majority

# Option 3: External MongoDB Server
# MONGODB_URI=mongodb://username:password@your-server:27017/myapp?authSource=admin
# ============================================
